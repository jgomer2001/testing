<!DOCTYPE html>
<html>
<head>
	<script src="enroll.js">;</script>
	<script src="jquery-3.3.1.min.js">;</script>
	<script>
		//The URL of a Gluu server
		var issuer = "https://gomer-vbox"

		//This client should exist already in Gluu server pointed above
		var clientId = "@!3245.DF39.6A34.9E97!0001!513A.9888!0008!B171.326C.9E62.9323"
		var clientSecret = "secret"

		function sendCode() {
			var endpoint= "/enrollment/twilio_sms/send-code"
			var userid = $("#sendCode_userid").val()
			var code = $("#sendCode_number").val()

			getTokenUrl(issuer + "/.well-known/openid-configuration")
				.then(url => getToken(url, clientId, clientSecret))
				.then(r => alert(r))
		}

	</script>
</head>
<body>
<h1>Mobile phone enrollment</h1>

<hr />
<h2>sendCode</h2>
<label>userid
  <input id="sendCode_userid">
</label>
<label>number
  <input name="sendCode_number">
</label>
<input type="button" value="sendCode" onClick="sendCode()" />

<hr />
<h2>validateCode</h2>
<label>code
  <input name="validateCode_code">
</label>
<label>userid
  <input name="validateCode_userid">
</label>
<input type="button" value="validateCode" />

<hr />
<h2>finishEnrollment</h2>
<label>key
  <input name="finishEnrollment_key">
</label>
<label>nickName
  <input name="finishEnrollment_nickname">
</label>
<input type="button" value="finishEnrollment" />

</body>
</html>
